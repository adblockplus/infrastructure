# Puppet: Adblockplus::Log::Rotation['<%= @title %>']
<%= @path %> {
  <%= @interval %>
  compress
  missingok
  nodateext
  rotate <%= @count.to_i %>
  sharedscripts
  shred
<% unless @postrotate.empty? -%>
  postrotate
    <%= @postrotate.join("\n    ") rescue @postrotate %>
  endscript
<% end -%>
<% if @upload -%>
  lastaction
    <%= scope.function_shellquote([
      "ssh", "-i", "/etc/ssh/ssh_host_rsa_key",
      scope.function_hiera("adblockplus::log::uplink", "localhost"),
      @name,
    ]) %> < <%= @path %>.1.gz
  endscript
<% end -%>
}
